webpackJsonp([13],{RQuv:function(t,n,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},YiRA:function(t,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s={components:{},props:{},data:function(){return{spuId:"",catelogId:"",dataResp:{attrGroups:[],baseAttrs:[]},spuAttrsMap:{}}},computed:{},methods:{clearData:function(){this.dataResp.attrGroups=[],this.dataResp.baseAttrs=[],this.spuAttrsMap={}},getSpuBaseAttrs:function(){var t=this;this.$http({url:this.$http.adornUrl("/product/attr/base/listforspu/"+this.spuId),method:"get"}).then(function(n){n.data.data.forEach(function(n){t.spuAttrsMap[""+n.attrId]=n}),console.log("~~~~",t.spuAttrsMap)})},getQueryParams:function(){this.spuId=this.$route.query.spuId,this.catelogId=this.$route.query.catelogId,console.log("----",this.spuId,this.catelogId)},showBaseAttrs:function(){var t=this,n=this;this.$http({url:this.$http.adornUrl("/product/attrgroup/"+this.catelogId+"/withattr"),method:"get",params:this.$http.adornParams({})}).then(function(a){var s=a.data;s.data.forEach(function(a){var s=[];a.attrs.forEach(function(t){var a="";n.spuAttrsMap[""+t.attrId]&&1==(a=n.spuAttrsMap[""+t.attrId].attrValue.split(";")).length&&(a=a[0]+""),s.push({attrId:t.attrId,attrName:t.attrName,attrValues:a,showDesc:n.spuAttrsMap[""+t.attrId]?n.spuAttrsMap[""+t.attrId].quickShow:t.showDesc})}),t.dataResp.baseAttrs.push(s)}),t.dataResp.attrGroups=s.data})},submitSpuAttrs:function(){var t=this;console.log("·····",this.dataResp.baseAttrs);var n=[];this.dataResp.baseAttrs.forEach(function(t){t.forEach(function(t){var a="";""!=(a=t.attrValues instanceof Array?t.attrValues.join(";"):t.attrValues)&&n.push({attrId:t.attrId,attrName:t.attrName,attrValue:a,quickShow:t.showDesc})})}),this.$confirm("修改商品规格信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http({url:t.$http.adornUrl("/product/attr/update/"+t.spuId),method:"post",data:t.$http.adornData(n,!1)}).then(function(n){n.data;t.$message({type:"success",message:"属性修改成功!"})})}).catch(function(n){t.$message({type:"info",message:"已取消修改"+n})})}},created:function(){},activated:function(){this.clearData(),this.getQueryParams(),this.spuId&&this.catelogId&&(this.showBaseAttrs(),this.getSpuBaseAttrs())}},e={render:function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("el-card",{staticClass:"box-card"},[a("el-tabs",{staticStyle:{width:"98%"},attrs:{"tab-position":"left"}},t._l(t.dataResp.attrGroups,function(n,s){return a("el-tab-pane",{key:n.attrGroupId,attrs:{label:n.attrGroupName}},[a("el-form",{ref:"form",refInFor:!0,attrs:{model:t.dataResp}},t._l(n.attrs,function(n,e){return a("el-form-item",{key:n.attrId,attrs:{label:n.attrName}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"hidden"},model:{value:t.dataResp.baseAttrs[s][e].attrId,callback:function(n){t.$set(t.dataResp.baseAttrs[s][e],"attrId",n)},expression:"dataResp.baseAttrs[gidx][aidx].attrId"}}),t._v(" "),a("el-select",{attrs:{multiple:1==n.valueType,filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择或输入值"},model:{value:t.dataResp.baseAttrs[s][e].attrValues,callback:function(n){t.$set(t.dataResp.baseAttrs[s][e],"attrValues",n)},expression:"dataResp.baseAttrs[gidx][aidx].attrValues"}},t._l(n.valueSelect.split(";"),function(t,n){return a("el-option",{key:n,attrs:{label:t,value:t}})})),t._v(" "),a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.dataResp.baseAttrs[s][e].showDesc,callback:function(n){t.$set(t.dataResp.baseAttrs[s][e],"showDesc",n)},expression:"dataResp.baseAttrs[gidx][aidx].showDesc"}},[t._v("快速展示")])],1)}))],1)})),t._v(" "),a("div",{staticStyle:{margin:"auto"}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"success"},on:{click:t.submitSpuAttrs}},[t._v("确认修改")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,e,!1,function(t){a("sVIL")},"data-v-5786d471",null);n.default=r.exports},sVIL:function(t,n,a){var s=a("RQuv");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("5bdead67",s,!0)}});